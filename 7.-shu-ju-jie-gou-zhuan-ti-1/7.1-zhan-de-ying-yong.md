# 7.1 栈的应用

#### 7.1.1 栈的出栈序列

* 元素x之后，所有比x小的元素必须是降序排列的；
* 满足条件的x后面的序列的子序列必然也满足条件。

#### 7.1.2 简单计算器

1. 中缀表达式转后缀表达式：
   * 从左向右扫描中缀表达式；
   * 遇到数字时，加入后缀表达式；
   * 遇到运算符时：
     * 若为' ( '，入栈；
     * 若为' ) '，则依次把栈中的运算符加入后缀表达式，直到出现' ( '，从栈中删除' ( '；
     * 若为除括号外的其他运算符，当其优先级高于除' ( '外的栈顶运算符时，直接入栈。否则从栈顶开始，依次弹出比当前处理的运算符优先级高和优先级相等的运算符，直到一个比它优先级低的或遇到了一个左括号为止。**（优先级高=处理的需求更急迫，因此括号的优先级最高，乘除的优先级较高，较早入栈的优先级高。）**
   * 当扫描的中缀表达式结束时，栈中的所有运算符依次出栈加入后缀表达式。
2. 计算后缀表达式：
   * 若该项是操作数，则将其压入栈中；
   * 若该项是操作符\<op>，则连续从栈中弹出两个操作数**Y**和**X**，形成运算指令**X\<op>Y**，并将运算结果重新压入栈中；
   * 当表达式的所有项都扫描并处理完后，栈顶存放的就是最后的计算结果。
